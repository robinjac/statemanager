var entries=Object.entries,define=Object.defineProperty;function stateFactory(a){var b=a.properties,c=a.observers,d={},e={},f={state:{},$subscribe:function(a,b){a.forEach(function(a){d[a]||(d[a]=[]),d[a].push(b),e[a]=d[a].reduce(function(a,b){return function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];b.apply(void 0,c),a.apply(void 0,c)}})})}},g={};return entries(b).forEach(function(a){var b=a[0],c=a[1],h=c;f.state[b]||(g=define(g,b,{get:function(){return h},set:function(a){h=a},enumerable:!0}),f.state=define(f.state,b,{get:function(){return h},set:function(a){d[b]&&e[b](b,a,h,g),h=a},enumerable:!0}))}),c?Array(c).fill(f):f}var state={number:12,string:"hi there!"},test=stateFactory({properties:state});test.$subscribe(["number","string"],function(a,b,c,d){console.log("test reacted to",a,"changing from",c,"to",b,", current state:",d)}),setTimeout(function(){test.state.number=20,setTimeout(function(){test.state.string="derps"},1e3)},2e3);
